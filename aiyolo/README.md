# AIYOLO 智能视频监控系统

## 项目概述
AIYOLO是一个基于YOLO目标检测的智能视频监控系统，能够实时检测和跟踪视频中的人员和违禁物品，并在目标进入或即将进入安全区域时发出警报。系统支持实时视频流显示和日志记录功能。

## 系统架构
系统采用模块化设计，主要包含以下核心模块：
- 视频处理模块：负责视频流的获取和处理
- 目标检测模块：基于YOLO的目标检测和跟踪
- 日志管理模块：处理系统日志和状态显示
- Web服务器模块：提供视频流访问接口
- 工具模块：提供通用功能支持

## 模块说明

### 1. 视频处理模块 (video_processor.py)
负责视频流的处理和目标跟踪的核心模块。

#### 主要功能：
- 摄像头初始化和配置
- 视频帧处理
- 目标检测和跟踪
- 安全区域监控
- 状态更新和日志记录

#### 核心类：
- `VideoProcessor`：视频处理主类
  - 初始化摄像头
  - 设置安全区域
  - 处理视频帧
  - 更新安全状态

### 2. 目标检测模块 (yolo/yolo_infer.py)
基于YOLO的目标检测实现。

#### 主要功能：
- YOLO模型加载和初始化
- 目标检测和跟踪
- 目标类别管理
- 置信度处理

#### 核心类：
- `YOLODetector`：YOLO检测器类
  - 模型初始化
  - 目标检测
  - 跟踪ID管理

### 3. 日志管理模块 (logger.py)
处理系统日志和状态显示。

#### 主要功能：
- 日志面板创建和更新
- 日志文件记录
- 中文文字渲染
- 状态显示管理

#### 核心类：
- `LogManager`：日志管理类
  - 日志记录
  - 状态更新
  - 面板显示

### 4. Web服务器模块 (server.py)
提供视频流访问接口。

#### 主要功能：
- Flask服务器配置
- 视频流生成
- 路由管理
- 实时视频传输

#### 核心类：
- `VideoServer`：视频服务器类
  - 服务器初始化
  - 视频流生成
  - 路由设置

### 5. 工具模块 (utils.py)
提供通用功能支持。

#### 主要功能：
- 边界框绘制
- 轨迹绘制
- 安全区域检测
- 距离计算

#### 核心函数：
- `draw_bbox`：绘制边界框
- `draw_trajectory`：绘制轨迹
- `is_in_safe_zone`：安全区域检测
- `calculate_distance`：距离计算

### 6. 配置模块 (config.py)
系统配置管理。

#### 主要配置项：
- 屏幕配置
- 安全区域配置
- 日志配置
- 服务器配置

### 7. 主程序模块 (main.py)
系统入口和核心流程控制。

#### 主要功能：
- 组件初始化
- 信号处理
- 线程管理
- 资源清理

#### 核心类：
- `FrameManager`：帧管理单例类
  - 当前帧管理
  - 摄像头管理

## 系统流程
1. 系统启动
   - 加载配置
   - 初始化组件
   - 启动视频处理线程
   - 启动Web服务器

2. 视频处理
   - 获取视频帧
   - 目标检测和跟踪
   - 安全区域监控
   - 状态更新

3. 日志记录
   - 更新日志面板
   - 记录日志文件
   - 显示状态信息

4. 视频流传输
   - 生成视频流
   - 通过Web接口传输
   - 客户端显示

## 依赖项
- OpenCV
- NumPy
- Pillow
- Flask
- Ultralytics (YOLO)
- 其他依赖见requirements.txt

## 使用说明
1. 安装依赖：
```bash
pip install -r requirements.txt
```

2. 运行系统：
```bash
python main.py
```

3. 访问视频流：
- 打开浏览器访问：`http://localhost:5000/video_feed`

## 注意事项
1. 确保已安装所有必要的依赖
2. 确保有可用的摄像头设备
3. 确保模型文件存在于正确位置
4. 系统需要Python 3.7+环境 